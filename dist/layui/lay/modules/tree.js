layui.define("jquery",function(e){"use strict";var t=layui.jquery,n=layui.hint(),r="layui-tree-enter",i=function(e){this.options=e},s={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};i.prototype.init=function(e){var t=this;e.addClass("layui-box layui-tree"),t.options.skin&&e.addClass("layui-tree-skin-"+t.options.skin),t.tree(e),t.on(e)},i.prototype.tree=function(e,n){var r=this,i=r.options,u=n||i.nodes;layui.each(u,function(n,u){var a=u.children&&u.children.length>0,f=t('<ul class="'+(u.spread?"layui-show":"")+'"></ul>'),l=t(["<li "+(u.spread?'data-spread="'+u.spread+'"':"")+">",function(){return a?'<i class="layui-icon layui-tree-spread">'+(u.spread?s.arrow[1]:s.arrow[0])+"</i>":""}(),function(){return i.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===i.check?s.checkbox[0]:"radio"===i.check?s.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(u.href||"javascript:;")+'" '+(i.target&&u.href?'target="'+i.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(a?"branch":"leaf")+'">'+(a?u.spread?s.branch[1]:s.branch[0]:s.leaf)+"</i>")+("<cite>"+(u.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));a&&(l.append(f),r.tree(f,u.children)),e.append(l),"function"==typeof i.click&&r.click(l,u),r.spread(l,u),i.drag&&r.drag(l,u)})},i.prototype.click=function(e,t){var n=this,r=n.options;e.children("a").on("click",function(e){layui.stope(e),r.click(t)})},i.prototype.spread=function(e,t){var n=this,r=(n.options,e.children(".layui-tree-spread")),i=e.children("ul"),o=e.children("a"),u=function(){e.data("spread")?(e.data("spread",null),i.removeClass("layui-show"),r.html(s.arrow[0]),o.find(".layui-icon").html(s.branch[0])):(e.data("spread",!0),i.addClass("layui-show"),r.html(s.arrow[1]),o.find(".layui-icon").html(s.branch[1]))};i[0]&&(r.on("click",u),o.on("dblclick",u))},i.prototype.on=function(e){var n=this,i=n.options,s="layui-tree-drag";e.find("i").on("selectstart",function(e){return!1}),i.drag&&t(document).on("mousemove",function(e){var r=n.move;if(r.from){var i=(r.to,t('<div class="layui-box '+s+'"></div>'));e.preventDefault(),t("."+s)[0]||t("body").append(i);var u=t("."+s)[0]?t("."+s):i;u.addClass("layui-show").html(r.from.elem.children("a").html()),u.css({left:e.pageX+10,top:e.pageY+10})}}).on("mouseup",function(){var e=n.move;e.from&&(e.from.elem.children("a").removeClass(r),e.to&&e.to.elem.children("a").removeClass(r),n.move={},t("."+s).remove())})},i.prototype.move={},i.prototype.drag=function(e,n){var i=this,s=(i.options,e.children("a")),u=function(){var s=t(this),u=i.move;u.from&&(u.to={item:n,elem:e},s.addClass(r))};s.on("mousedown",function(){var t=i.move;t.from={item:n,elem:e}}),s.on("mouseenter",u).on("mousemove",u).on("mouseleave",function(){var e=t(this),n=i.move;n.from&&(delete n.to,e.removeClass(r))})},e("tree",function(e){var r=new i(e=e||{}),s=t(e.elem);return s[0]?void r.init(s):n.error("layui.tree 没有找到"+e.elem+"元素")})});