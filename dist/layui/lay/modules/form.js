layui.define("layer",function(e){"use strict";var t=layui.jquery,n=layui.layer,r=layui.hint(),i=layui.device(),s="form",o=".layui-form",u="layui-this",a="layui-hide",f="layui-disabled",l=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:[/^\d+$/,"只能填写数字"],date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};l.prototype.set=function(e){var n=this;return t.extend(!0,n.config,e),n},l.prototype.verify=function(e){var n=this;return t.extend(!0,n.config.verify,e),n},l.prototype.on=function(e,t){return layui.onevent(s,e,t)},l.prototype.render=function(e){var n=this,i={select:function(){var e,n="请选择",r="layui-form-select",i="layui-select-title",l="layui-select-none",c="",h=t(o).find("select"),p=function(n,s){t(n.target).parent().hasClass(i)&&!s||(t("."+r).removeClass(r+"ed"),e&&c&&e.val(c)),e=null},d=function(n,o,h){var d=t(this),v=n.find("."+i),m=v.find("input"),g=n.find("dl"),b=g.children("dd");if(!o){var w=function(){n.addClass(r+"ed"),b.removeClass(a)},E=function(){n.removeClass(r+"ed"),m.blur(),S(m.val(),function(e){e&&(c=g.find("."+u).html(),m&&m.val(c))})};v.on("click",function(e){n.hasClass(r+"ed")?E():(p(e,!0),w()),g.find("."+l).remove()}),v.find(".layui-edge").on("click",function(){m.focus()}),m.on("keyup",function(e){var t=e.keyCode;9===t&&w()}).on("keydown",function(e){var t=e.keyCode;9===t?E():13===t&&e.preventDefault()});var S=function(e,n,r){var i=0;layui.each(b,function(){var n=t(this),s=n.text(),o=s.indexOf(e)===-1;(""===e||"blur"===r?e!==s:o)&&i++,"keyup"===r&&n[o?"addClass":"removeClass"](a)});var s=i===b.length;return n(s),s},x=function(e){var t=this.value,n=e.keyCode;return 9!==n&&13!==n&&37!==n&&38!==n&&39!==n&&40!==n&&(S(t,function(e){e?g.find("."+l)[0]||g.append('<p class="'+l+'">无匹配项</p>'):g.find("."+l).remove()},"keyup"),void (""===t&&g.find("."+l).remove()))};h&&m.on("keyup",x).on("blur",function(t){e=m,c=g.find("."+u).html(),setTimeout(function(){S(m.val(),function(e){e&&!c&&m.val("")},"blur")},200)}),b.on("click",function(){var e=t(this),r=e.attr("lay-value"),i=d.attr("lay-filter");return!e.hasClass(f)&&(d.val(r).removeClass("layui-form-danger"),m.val(e.text()),e.addClass(u).siblings().removeClass(u),layui.event.call(this,s,"select("+i+")",{elem:d[0],value:r,othis:n}),E(),!1)}),n.find("dl>dt").on("click",function(e){return!1}),t(document).off("click",p).on("click",p)}};h.each(function(e,s){var o=t(this),a=o.next("."+r),l=this.disabled,c=s.value,h=t(s.options[s.selectedIndex]);if("string"==typeof o.attr("lay-ignore"))return o.show();var p="string"==typeof o.attr("lay-search"),m=t(['<div class="layui-unselect '+r+(l?" layui-select-disabled":"")+'">','<div class="'+i+'"><input type="text" placeholder="'+(s.options[0].innerHTML?s.options[0].innerHTML:n)+'" value="'+(c?h.html():"")+'" '+(p?"":"readonly")+' class="layui-input layui-unselect'+(l?" "+f:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(o.find("optgroup")[0]?" layui-select-group":"")+'">'+function(e){var t=[];return layui.each(e,function(e,n){(0!==e||n.value)&&("optgroup"===n.tagName.toLowerCase()?t.push("<dt>"+n.label+"</dt>"):t.push('<dd lay-value="'+n.value+'" class="'+(c===n.value?u:"")+(n.disabled?" "+f:"")+'">'+n.innerHTML+"</dd>"))}),t.join("")}(o.find("*"))+"</dl>","</div>"].join(""));a[0]&&a.remove(),o.after(m),d.call(this,m,l,p)})},checkbox:function(){var e={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},n=t(o).find("input[type=checkbox]"),r=function(e,n){var r=t(this);e.on("click",function(){var t=r.attr("lay-filter"),i=(r.attr("lay-text")||"").split("|");r[0].disabled||(r[0].checked?(r[0].checked=!1,e.removeClass(n[1]).find("em").text(i[1])):(r[0].checked=!0,e.addClass(n[1]).find("em").text(i[0])),layui.event.call(r[0],s,n[2]+"("+t+")",{elem:r[0],value:r[0].value,othis:e}))})};n.each(function(n,i){var s=t(this),o=s.attr("lay-skin"),u=(s.attr("lay-text")||"").split("|"),a=this.disabled;"switch"===o&&(o="_"+o);var l=e[o]||e.checkbox;if("string"==typeof s.attr("lay-ignore"))return s.show();var c=s.next("."+l[0]),h=t(['<div class="layui-unselect '+l[0]+(i.checked?" "+l[1]:"")+(a?" layui-checkbox-disbaled "+f:"")+'" lay-skin="'+(o||"")+'">',{_switch:"<em>"+((i.checked?u[0]:u[1])||"")+"</em><i></i>"}[o]||(i.title.replace(/\s/g,"")?"<span>"+i.title+"</span>":"")+'<i class="layui-icon">'+(o?"&#xe605;":"&#xe618;")+"</i>","</div>"].join(""));c[0]&&c.remove(),s.after(h),r.call(this,h,l)})},radio:function(){var e="layui-form-radio",n=["&#xe643;","&#xe63f;"],r=t(o).find("input[type=radio]"),i=function(r){var i=t(this),u="layui-anim-scaleSpring";r.on("click",function(){var a=i[0].name,f=i.parents(o),l=i.attr("lay-filter"),c=f.find("input[name="+a.replace(/(\.|#|\[|\])/g,"\\$1")+"]");i[0].disabled||(layui.each(c,function(){var r=t(this).next("."+e);this.checked=!1,r.removeClass(e+"ed"),r.find(".layui-icon").removeClass(u).html(n[1])}),i[0].checked=!0,r.addClass(e+"ed"),r.find(".layui-icon").addClass(u).html(n[0]),layui.event.call(i[0],s,"radio("+l+")",{elem:i[0],value:i[0].value,othis:r}))})};r.each(function(r,s){var o=t(this),u=o.next("."+e),a=this.disabled;if("string"==typeof o.attr("lay-ignore"))return o.show();var l=t(['<div class="layui-unselect '+e+(s.checked?" "+e+"ed":"")+(a?" layui-radio-disbaled "+f:"")+'">','<i class="layui-anim layui-icon">'+n[s.checked?0:1]+"</i>","<span>"+(s.title||"未命名")+"</span>","</div>"].join(""));u[0]&&u.remove(),o.after(l),i.call(this,l)})}};return e?i[e]?i[e]():r.error("不支持的"+e+"表单渲染"):layui.each(i,function(e,t){t()}),n};var c=function(){var e=t(this),r=h.config.verify,u=null,a="layui-form-danger",f={},l=e.parents(o),c=l.find("*[lay-verify]"),p=e.parents("form")[0],d=l.find("input,select,textarea"),v=e.attr("lay-filter");return layui.each(c,function(e,s){var o=t(this),f=o.attr("lay-verify").split("|"),l="",c=o.val();if(o.removeClass(a),layui.each(f,function(e,t){var f="function"==typeof r[t];if(r[t]&&(f?l=r[t](c,s):!r[t][0].test(c)))return n.msg(l||r[t][1],{icon:5,shift:6}),i.android||i.ios||s.focus(),o.addClass(a),u=!0}),u)return u}),!u&&(layui.each(d,function(e,t){t.name&&(/^checkbox|radio$/.test(t.type)&&!t.checked||(f[t.name]=t.value))}),layui.event.call(this,s,"submit("+v+")",{elem:this,form:p,field:f}))},h=new l,p=t(document);h.render(),p.on("reset",o,function(){setTimeout(function(){h.render()},50)}),p.on("submit",o,c).on("click","*[lay-submit]",c),e(s,function(e){return h.set(e)})});