layui.define("jquery",function(e){"use strict";var t=layui.jquery,n=function(e){},r='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';n.prototype.load=function(e){var n,i,s,o,u=this,a=0;e=e||{};var f=t(e.elem);if(f[0]){var c=t(e.scrollElem||document),h=e.mb||50,p=!("isAuto"in e)||e.isAuto,d=e.end||"没有更多了",v=e.scrollElem&&e.scrollElem!==document,m="<cite>加载更多</cite>",g=t('<div class="layui-flow-more"><a href="javascript:;">'+m+"</a></div>");f.find(".layui-flow-more")[0]||f.append(g);var y=function(e,r){e=t(e),g.before(e),r=0==r||null,r?g.html(d):g.find("a").html(m),i=r,n=null,s&&s()},b=function(){n=!0,g.find("a").html(r),"function"==typeof e.done&&e.done(++a,y)};if(b(),g.find("a").on("click",function(){t(this),i||n||b()}),e.isLazyimg)var s=u.lazyimg({elem:e.elem+" img",scrollElem:e.scrollElem});return p?(c.on("scroll",function(){var e=t(this),r=e.scrollTop();o&&clearTimeout(o),i||(o=setTimeout(function(){var i=v?e.height():t(window).height(),s=v?e.prop("scrollHeight"):document.documentElement.scrollHeight;s-r-i<=h&&(n||b())},100))}),u):u}},n.prototype.lazyimg=function(e){var n,r=this,i=0;e=e||{};var s=t(e.scrollElem||document),o=e.elem||"img",u=e.scrollElem&&e.scrollElem!==document,a=function(e,t){var n=s.scrollTop(),o=n+t,a=u?function(){return e.offset().top-s.offset().top+n}():e.offset().top;if(a>=n&&a<=o&&!e.attr("src")){var l=e.attr("lay-src");layui.img(l,function(){var t=r.lazyimg.elem.eq(i);e.attr("src",l).removeAttr("lay-src"),t[0]&&f(t),i++})}},f=function(e,n){var f=u?(n||s).height():t(window).height(),c=s.scrollTop(),h=c+f;if(r.lazyimg.elem=t(o),e)a(e,f);else for(var p=0;p<r.lazyimg.elem.length;p++){var d=r.lazyimg.elem.eq(p),v=u?function(){return d.offset().top-s.offset().top+c}():d.offset().top;if(a(d,f),i=p,v>h)break}};if(f(),!n){var c;s.on("scroll",function(){var e=t(this);c&&clearTimeout(c),c=setTimeout(function(){f(null,e)},50)}),n=!0}return f},e("flow",new n)});